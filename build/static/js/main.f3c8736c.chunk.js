(this["webpackJsonpinfinite-game-of-life-web"]=this["webpackJsonpinfinite-game-of-life-web"]||[]).push([[0],{24:function(e,t,n){e.exports=n(51)},29:function(e,t,n){},39:function(e,t){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(21),r=n.n(c),l=(n(29),n(1)),i=n(23),s=n(22),u=function(e){var t=e.grid,n=e.onSend;return o.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(d,", 20px)")}},t.map((function(e,a){return e.map((function(e,c){return o.a.createElement("div",{key:"".concat(a,"-").concat(c),onClick:function(){n({i:a,k:c})},style:{width:20,height:20,backgroundColor:t[a][c]?"pink":void 0,border:"solid 1px #444"}})}))})))},m=n(7),d=5;function f(e){for(var t=Object(i.a)(e),n=[];t.length;)n.push(t.splice(0,d));return n}var b=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),i=Object(l.a)(r,2),d=i[0],b=i[1],g=Object(a.useState)(),v=Object(l.a)(g,2),p=v[0],h=v[1],E=Object(a.useState)(0),O=Object(l.a)(E,2),j=O[0],w=O[1],x=Object(a.useState)(),k=Object(l.a)(x,2),y=k[0],N=k[1],S=Object(a.useState)(0),C=Object(l.a)(S,2),I=C[0],J=C[1],M=Object(a.useState)(!1),R=Object(l.a)(M,2),B=R[0],G=R[1],W=Object(a.useState)([]),_=Object(l.a)(W,2),D=_[0],L=_[1];Object(a.useEffect)((function(){new s.Client("ws://localhost:2567").joinOrCreate("life_room").then((function(e){b(e),e.onStateChange((function(e){console.log("1"),N(f(e.board)),h(f(e.board)),J(e.generation),w(e.generation)})),e.onMessage("tick",(function(e){c(new Date(1e3*e).toISOString().substr(14,5))})),e.onMessage("receive_all",(function(e){var t=e.allGens,n=e.state;console.log("2"),L(t),N(f(n.board)),h(f(n.board)),w(n.generation),J(n.generation)}))})).catch((function(e){console.log("JOIN ERROR",e)}))}),[]),Object(a.useEffect)((function(){D&&j!==I&&D[j-1]?h(f(D[j-1].board)):j===I&&h(y)}),[j,I]);var T=Object(a.useCallback)((function(e){var t=e.i,n=e.k;j===I&&(console.log("click"),null===d||void 0===d||d.send("click",{i:t,k:n}))}),[d,j,I]);return p?o.a.createElement("div",{className:"my-5 flex flex-col w-full items-center"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement("div",{className:"text-2xl font-bold mb-2"},"Infinite Game of Life ")),o.a.createElement("div",{className:"mb-1 flex flex-col-reverse"},o.a.createElement("div",{className:"mt-1 flex flex-col items-center"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement("input",{className:"rounded-lg overflow-hidden appearance-none bg-gray-400 h-3 w-full",type:"range",min:"0",max:I,step:"1",value:j,onChange:function(e){return w(Number.parseInt(e.target.value))}}),o.a.createElement("button",{onClick:function(){G(!B)},className:"ml-3 bg-white hover:bg-gray-100 text-gray-800 font-semibold py-1 px-4 border border-gray-400 rounded shadow"},B?o.a.createElement(m.a,null):o.a.createElement(m.b,null)))),o.a.createElement("div",{className:"m-1 p-2 border border-gray-600 rounded"},"Next generation in: ",o.a.createElement("span",{className:"font-bold"},n))),o.a.createElement("div",{className:"mb-3"},"Viewing generation: ",o.a.createElement("b",null,j)),p&&o.a.createElement(u,{grid:p,onSend:T})):o.a.createElement("div",null,"loading")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.f3c8736c.chunk.js.map